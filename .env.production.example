# FastEmbed API - Production Configuration (Rust)
# Copy this file to .env and update all values

# ============================================
# Docker Compose Variables (REQUIRED)
# ============================================

# PostgreSQL - Used by docker-compose.prod.yml
POSTGRES_USER=fastembed
POSTGRES_PASSWORD=CHANGE_TO_SECURE_PASSWORD  # REQUIRED! Generate with: openssl rand -base64 32
POSTGRES_DB=fastembed

# Grafana - Used by docker-compose.prod.yml
GRAFANA_USER=admin
GRAFANA_PASSWORD=CHANGE_TO_SECURE_PASSWORD  # REQUIRED! Generate with: openssl rand -base64 24

# ============================================
# FastEmbed Application Settings
# ============================================

# API Settings
APP_NAME=FastEmbed Query API
VERSION=0.1.0
DEBUG=false

# Server Settings
HOST=0.0.0.0
PORT=8000
WORKERS=4

# Model Settings
MODEL_NAME=sentence-transformers/all-MiniLM-L6-v2
MODEL_PATH=/app/models/all-MiniLM-L6-v2-onnx
MAX_TOKENS=128
EMBEDDING_DIM=384

# Cache Settings
L1_CACHE_SIZE=10000
L2_CACHE_TTL=86400
REDIS_URL=redis://redis:6379  # Docker internal network
REDIS_DB=0

# Database Settings
# Note: DATABASE_URL is set automatically in docker-compose.prod.yml using POSTGRES_* vars
# Rust uses standard PostgreSQL connection string format
# DATABASE_URL=postgres://fastembed:PASSWORD@postgres:5432/fastembed?sslmode=disable

# Security Settings
SECRET_KEY=GENERATE_SECURE_RANDOM_KEY  # REQUIRED! Generate with: openssl rand -hex 32
API_KEY_PREFIX=fe_

# Rate Limiting (embeddings per month)
FREE_TIER_LIMIT=20000
PRO_TIER_LIMIT=100000
SCALE_TIER_LIMIT=2000000

# Performance Settings
MAX_BATCH_SIZE=1

# ============================================
# Quick Setup Script
# ============================================
# Run this to generate secure passwords:
#
# POSTGRES_PASSWORD=$(openssl rand -base64 32)
# GRAFANA_PASSWORD=$(openssl rand -base64 24)
# SECRET_KEY=$(openssl rand -hex 32)
#
# echo "POSTGRES_PASSWORD=$POSTGRES_PASSWORD"
# echo "GRAFANA_PASSWORD=$GRAFANA_PASSWORD"
# echo "SECRET_KEY=$SECRET_KEY"
